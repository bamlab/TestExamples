"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const effects_1 = require("redux-saga/effects");
const signup_1 = require("../../api/signup");
const types_1 = require("./types");
const actions_1 = require("../toaster/actions");
const wording_1 = require("../../utils/wording");
function* subscribeNewsletterSaga(action) {
    try {
        const { email } = action.payload;
        yield effects_1.call(signup_1.SignUpApi.subscribeNewsletter, { email });
        yield effects_1.put(actions_1.ToasterActions.showSuccessMessage(wording_1.wording.subscriptionSuccessful));
    }
    catch (err) {
        yield effects_1.put(actions_1.ToasterActions.showErrorMessage(wording_1.wording.basicError));
    }
}
function* subscribeNewsletterWatcher() {
    yield effects_1.takeEvery(types_1.SignUpActionTypes.SUBSCRIBE_NEWSLETTER, subscribeNewsletterSaga);
}
exports.subscribeNewsletterWatcher = subscribeNewsletterWatcher;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL21hdHRoaWV1L3Byb2plY3RzL1Rlc3RFeGFtcGxlcy9zcmMvbW9kdWxlcy9zaWdudXAvc2FnYXMudHMiLCJtYXBwaW5ncyI6Ijs7QUFBQSxnREFBMEQ7QUFHMUQsNkNBQTZDO0FBRzdDLG1DQUE0QztBQUM1QyxnREFBb0Q7QUFDcEQsaURBQThDO0FBRTlDLFFBQVEsQ0FBQyxDQUFDLHVCQUF1QixDQUMvQixNQUF1RjtJQUV2RixJQUFJO1FBQ0YsTUFBTSxFQUFFLEtBQUssRUFBRSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUM7UUFDakMsTUFBTSxjQUFJLENBQUMsa0JBQVMsQ0FBQyxtQkFBbUIsRUFBRSxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7UUFDckQsTUFBTSxhQUFHLENBQUMsd0JBQWMsQ0FBQyxrQkFBa0IsQ0FBQyxpQkFBTyxDQUFDLHNCQUFzQixDQUFDLENBQUMsQ0FBQztLQUM5RTtJQUFDLE9BQU8sR0FBRyxFQUFFO1FBQ1osTUFBTSxhQUFHLENBQUMsd0JBQWMsQ0FBQyxnQkFBZ0IsQ0FBQyxpQkFBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUM7S0FDaEU7QUFDSCxDQUFDO0FBRUQsUUFBZSxDQUFDLENBQUMsMEJBQTBCO0lBQ3pDLE1BQU0sbUJBQVMsQ0FBQyx5QkFBaUIsQ0FBQyxvQkFBb0IsRUFBRSx1QkFBdUIsQ0FBQyxDQUFDO0FBQ25GLENBQUM7QUFGRCxnRUFFQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvbWF0dGhpZXUvcHJvamVjdHMvVGVzdEV4YW1wbGVzL3NyYy9tb2R1bGVzL3NpZ251cC9zYWdhcy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjYWxsLCBwdXQsIHRha2VFdmVyeSB9IGZyb20gJ3JlZHV4LXNhZ2EvZWZmZWN0cyc7XG5pbXBvcnQgeyBBY3Rpb25zT2ZUeXBlIH0gZnJvbSAnQG1hcnRpbl9ob3RlbGwvcmV4LXRpbHMnO1xuXG5pbXBvcnQgeyBTaWduVXBBcGkgfSBmcm9tICcuLi8uLi9hcGkvc2lnbnVwJztcblxuaW1wb3J0IHsgVFNpZ25VcEFjdGlvbk9iamVjdFR5cGVzIH0gZnJvbSAnLi9hY3Rpb25zJztcbmltcG9ydCB7IFNpZ25VcEFjdGlvblR5cGVzIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBUb2FzdGVyQWN0aW9ucyB9IGZyb20gJy4uL3RvYXN0ZXIvYWN0aW9ucyc7XG5pbXBvcnQgeyB3b3JkaW5nIH0gZnJvbSAnLi4vLi4vdXRpbHMvd29yZGluZyc7XG5cbmZ1bmN0aW9uKiBzdWJzY3JpYmVOZXdzbGV0dGVyU2FnYShcbiAgYWN0aW9uOiBBY3Rpb25zT2ZUeXBlPFRTaWduVXBBY3Rpb25PYmplY3RUeXBlcywgU2lnblVwQWN0aW9uVHlwZXMuU1VCU0NSSUJFX05FV1NMRVRURVI+XG4pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGVtYWlsIH0gPSBhY3Rpb24ucGF5bG9hZDtcbiAgICB5aWVsZCBjYWxsKFNpZ25VcEFwaS5zdWJzY3JpYmVOZXdzbGV0dGVyLCB7IGVtYWlsIH0pO1xuICAgIHlpZWxkIHB1dChUb2FzdGVyQWN0aW9ucy5zaG93U3VjY2Vzc01lc3NhZ2Uod29yZGluZy5zdWJzY3JpcHRpb25TdWNjZXNzZnVsKSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHlpZWxkIHB1dChUb2FzdGVyQWN0aW9ucy5zaG93RXJyb3JNZXNzYWdlKHdvcmRpbmcuYmFzaWNFcnJvcikpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiogc3Vic2NyaWJlTmV3c2xldHRlcldhdGNoZXIoKSB7XG4gIHlpZWxkIHRha2VFdmVyeShTaWduVXBBY3Rpb25UeXBlcy5TVUJTQ1JJQkVfTkVXU0xFVFRFUiwgc3Vic2NyaWJlTmV3c2xldHRlclNhZ2EpO1xufVxuIl0sInZlcnNpb24iOjN9