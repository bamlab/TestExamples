2620ff5fd63c0440538549403925acbb
var Compressed = require('./compress');

var Identity = require('./identity');

module.exports = function (node, options) {
  options = options || {};
  var compiler = options.compress ? new Compressed(options) : new Identity(options);

  if (options.sourcemap) {
    var sourcemaps = require('./source-map-support');

    sourcemaps(compiler);
    var code = compiler.compile(node);
    compiler.applySourceMaps();
    var map = options.sourcemap === 'generator' ? compiler.map : compiler.map.toJSON();
    return {
      code: code,
      map: map
    };
  }

  var code = compiler.compile(node);
  return code;
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkNvbXByZXNzZWQiLCJyZXF1aXJlIiwiSWRlbnRpdHkiLCJtb2R1bGUiLCJleHBvcnRzIiwibm9kZSIsIm9wdGlvbnMiLCJjb21waWxlciIsImNvbXByZXNzIiwic291cmNlbWFwIiwic291cmNlbWFwcyIsImNvZGUiLCJjb21waWxlIiwiYXBwbHlTb3VyY2VNYXBzIiwibWFwIiwidG9KU09OIl0sIm1hcHBpbmdzIjoiQUFLQSxJQUFJQSxVQUFVLEdBQUdDLE9BQU8sQ0FBQyxZQUFELENBQXhCOztBQUNBLElBQUlDLFFBQVEsR0FBR0QsT0FBTyxDQUFDLFlBQUQsQ0FBdEI7O0FBZ0JBRSxNQUFNLENBQUNDLE9BQVAsR0FBaUIsVUFBU0MsSUFBVCxFQUFlQyxPQUFmLEVBQXVCO0FBQ3RDQSxFQUFBQSxPQUFPLEdBQUdBLE9BQU8sSUFBSSxFQUFyQjtBQUVBLE1BQUlDLFFBQVEsR0FBR0QsT0FBTyxDQUFDRSxRQUFSLEdBQ1gsSUFBSVIsVUFBSixDQUFlTSxPQUFmLENBRFcsR0FFWCxJQUFJSixRQUFKLENBQWFJLE9BQWIsQ0FGSjs7QUFLQSxNQUFJQSxPQUFPLENBQUNHLFNBQVosRUFBdUI7QUFDckIsUUFBSUMsVUFBVSxHQUFHVCxPQUFPLENBQUMsc0JBQUQsQ0FBeEI7O0FBQ0FTLElBQUFBLFVBQVUsQ0FBQ0gsUUFBRCxDQUFWO0FBRUEsUUFBSUksSUFBSSxHQUFHSixRQUFRLENBQUNLLE9BQVQsQ0FBaUJQLElBQWpCLENBQVg7QUFDQUUsSUFBQUEsUUFBUSxDQUFDTSxlQUFUO0FBRUEsUUFBSUMsR0FBRyxHQUFHUixPQUFPLENBQUNHLFNBQVIsS0FBc0IsV0FBdEIsR0FDTkYsUUFBUSxDQUFDTyxHQURILEdBRU5QLFFBQVEsQ0FBQ08sR0FBVCxDQUFhQyxNQUFiLEVBRko7QUFJQSxXQUFPO0FBQUVKLE1BQUFBLElBQUksRUFBRUEsSUFBUjtBQUFjRyxNQUFBQSxHQUFHLEVBQUVBO0FBQW5CLEtBQVA7QUFDRDs7QUFFRCxNQUFJSCxJQUFJLEdBQUdKLFFBQVEsQ0FBQ0ssT0FBVCxDQUFpQlAsSUFBakIsQ0FBWDtBQUNBLFNBQU9NLElBQVA7QUFDRCxDQXhCRCIsInNvdXJjZXNDb250ZW50IjpbIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBDb21wcmVzc2VkID0gcmVxdWlyZSgnLi9jb21wcmVzcycpO1xudmFyIElkZW50aXR5ID0gcmVxdWlyZSgnLi9pZGVudGl0eScpO1xuXG4vKipcbiAqIFN0cmluZ2Z5IHRoZSBnaXZlbiBBU1QgYG5vZGVgLlxuICpcbiAqIE9wdGlvbnM6XG4gKlxuICogIC0gYGNvbXByZXNzYCBzcGFjZS1vcHRpbWl6ZWQgb3V0cHV0XG4gKiAgLSBgc291cmNlbWFwYCByZXR1cm4gYW4gb2JqZWN0IHdpdGggYC5jb2RlYCBhbmQgYC5tYXBgXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG5vZGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHVibGljXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihub2RlLCBvcHRpb25zKXtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgdmFyIGNvbXBpbGVyID0gb3B0aW9ucy5jb21wcmVzc1xuICAgID8gbmV3IENvbXByZXNzZWQob3B0aW9ucylcbiAgICA6IG5ldyBJZGVudGl0eShvcHRpb25zKTtcblxuICAvLyBzb3VyY2UgbWFwc1xuICBpZiAob3B0aW9ucy5zb3VyY2VtYXApIHtcbiAgICB2YXIgc291cmNlbWFwcyA9IHJlcXVpcmUoJy4vc291cmNlLW1hcC1zdXBwb3J0Jyk7XG4gICAgc291cmNlbWFwcyhjb21waWxlcik7XG5cbiAgICB2YXIgY29kZSA9IGNvbXBpbGVyLmNvbXBpbGUobm9kZSk7XG4gICAgY29tcGlsZXIuYXBwbHlTb3VyY2VNYXBzKCk7XG5cbiAgICB2YXIgbWFwID0gb3B0aW9ucy5zb3VyY2VtYXAgPT09ICdnZW5lcmF0b3InXG4gICAgICA/IGNvbXBpbGVyLm1hcFxuICAgICAgOiBjb21waWxlci5tYXAudG9KU09OKCk7XG5cbiAgICByZXR1cm4geyBjb2RlOiBjb2RlLCBtYXA6IG1hcCB9O1xuICB9XG5cbiAgdmFyIGNvZGUgPSBjb21waWxlci5jb21waWxlKG5vZGUpO1xuICByZXR1cm4gY29kZTtcbn07XG4iXX0=