04f9a42e4e0ef5015c33115f9685d33f
var commentre = /\/\*[^*]*\*+([^/*][^*]*\*+)*\//g;

module.exports = function (css, options) {
  options = options || {};
  var lineno = 1;
  var column = 1;

  function updatePosition(str) {
    var lines = str.match(/\n/g);
    if (lines) lineno += lines.length;
    var i = str.lastIndexOf('\n');
    column = ~i ? str.length - i : column + str.length;
  }

  function position() {
    var start = {
      line: lineno,
      column: column
    };
    return function (node) {
      node.position = new Position(start);
      whitespace();
      return node;
    };
  }

  function Position(start) {
    this.start = start;
    this.end = {
      line: lineno,
      column: column
    };
    this.source = options.source;
  }

  Position.prototype.content = css;
  var errorsList = [];

  function error(msg) {
    var err = new Error(options.source + ':' + lineno + ':' + column + ': ' + msg);
    err.reason = msg;
    err.filename = options.source;
    err.line = lineno;
    err.column = column;
    err.source = css;

    if (options.silent) {
      errorsList.push(err);
    } else {
      throw err;
    }
  }

  function stylesheet() {
    var rulesList = rules();
    return {
      type: 'stylesheet',
      stylesheet: {
        source: options.source,
        rules: rulesList,
        parsingErrors: errorsList
      }
    };
  }

  function open() {
    return match(/^{\s*/);
  }

  function close() {
    return match(/^}/);
  }

  function rules() {
    var node;
    var rules = [];
    whitespace();
    comments(rules);

    while (css.length && css.charAt(0) != '}' && (node = atrule() || rule())) {
      if (node !== false) {
        rules.push(node);
        comments(rules);
      }
    }

    return rules;
  }

  function match(re) {
    var m = re.exec(css);
    if (!m) return;
    var str = m[0];
    updatePosition(str);
    css = css.slice(str.length);
    return m;
  }

  function whitespace() {
    match(/^\s*/);
  }

  function comments(rules) {
    var c;
    rules = rules || [];

    while (c = comment()) {
      if (c !== false) {
        rules.push(c);
      }
    }

    return rules;
  }

  function comment() {
    var pos = position();
    if ('/' != css.charAt(0) || '*' != css.charAt(1)) return;
    var i = 2;

    while ("" != css.charAt(i) && ('*' != css.charAt(i) || '/' != css.charAt(i + 1))) {
      ++i;
    }

    i += 2;

    if ("" === css.charAt(i - 1)) {
      return error('End of comment missing');
    }

    var str = css.slice(2, i - 2);
    column += 2;
    updatePosition(str);
    css = css.slice(i);
    column += 2;
    return pos({
      type: 'comment',
      comment: str
    });
  }

  function selector() {
    var m = match(/^([^{]+)/);
    if (!m) return;
    return trim(m[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g, '').replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g, function (m) {
      return m.replace(/,/g, "\u200C");
    }).split(/\s*(?![^(]*\)),\s*/).map(function (s) {
      return s.replace(/\u200C/g, ',');
    });
  }

  function declaration() {
    var pos = position();
    var prop = match(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);
    if (!prop) return;
    prop = trim(prop[0]);
    if (!match(/^:\s*/)) return error("property missing ':'");
    var val = match(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/);
    var ret = pos({
      type: 'declaration',
      property: prop.replace(commentre, ''),
      value: val ? trim(val[0]).replace(commentre, '') : ''
    });
    match(/^[;\s]*/);
    return ret;
  }

  function declarations() {
    var decls = [];
    if (!open()) return error("missing '{'");
    comments(decls);
    var decl;

    while (decl = declaration()) {
      if (decl !== false) {
        decls.push(decl);
        comments(decls);
      }
    }

    if (!close()) return error("missing '}'");
    return decls;
  }

  function keyframe() {
    var m;
    var vals = [];
    var pos = position();

    while (m = match(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/)) {
      vals.push(m[1]);
      match(/^,\s*/);
    }

    if (!vals.length) return;
    return pos({
      type: 'keyframe',
      values: vals,
      declarations: declarations()
    });
  }

  function atkeyframes() {
    var pos = position();
    var m = match(/^@([-\w]+)?keyframes\s*/);
    if (!m) return;
    var vendor = m[1];
    var m = match(/^([-\w]+)\s*/);
    if (!m) return error("@keyframes missing name");
    var name = m[1];
    if (!open()) return error("@keyframes missing '{'");
    var frame;
    var frames = comments();

    while (frame = keyframe()) {
      frames.push(frame);
      frames = frames.concat(comments());
    }

    if (!close()) return error("@keyframes missing '}'");
    return pos({
      type: 'keyframes',
      name: name,
      vendor: vendor,
      keyframes: frames
    });
  }

  function atsupports() {
    var pos = position();
    var m = match(/^@supports *([^{]+)/);
    if (!m) return;
    var supports = trim(m[1]);
    if (!open()) return error("@supports missing '{'");
    var style = comments().concat(rules());
    if (!close()) return error("@supports missing '}'");
    return pos({
      type: 'supports',
      supports: supports,
      rules: style
    });
  }

  function athost() {
    var pos = position();
    var m = match(/^@host\s*/);
    if (!m) return;
    if (!open()) return error("@host missing '{'");
    var style = comments().concat(rules());
    if (!close()) return error("@host missing '}'");
    return pos({
      type: 'host',
      rules: style
    });
  }

  function atmedia() {
    var pos = position();
    var m = match(/^@media *([^{]+)/);
    if (!m) return;
    var media = trim(m[1]);
    if (!open()) return error("@media missing '{'");
    var style = comments().concat(rules());
    if (!close()) return error("@media missing '}'");
    return pos({
      type: 'media',
      media: media,
      rules: style
    });
  }

  function atcustommedia() {
    var pos = position();
    var m = match(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);
    if (!m) return;
    return pos({
      type: 'custom-media',
      name: trim(m[1]),
      media: trim(m[2])
    });
  }

  function atpage() {
    var pos = position();
    var m = match(/^@page */);
    if (!m) return;
    var sel = selector() || [];
    if (!open()) return error("@page missing '{'");
    var decls = comments();
    var decl;

    while (decl = declaration()) {
      decls.push(decl);
      decls = decls.concat(comments());
    }

    if (!close()) return error("@page missing '}'");
    return pos({
      type: 'page',
      selectors: sel,
      declarations: decls
    });
  }

  function atdocument() {
    var pos = position();
    var m = match(/^@([-\w]+)?document *([^{]+)/);
    if (!m) return;
    var vendor = trim(m[1]);
    var doc = trim(m[2]);
    if (!open()) return error("@document missing '{'");
    var style = comments().concat(rules());
    if (!close()) return error("@document missing '}'");
    return pos({
      type: 'document',
      document: doc,
      vendor: vendor,
      rules: style
    });
  }

  function atfontface() {
    var pos = position();
    var m = match(/^@font-face\s*/);
    if (!m) return;
    if (!open()) return error("@font-face missing '{'");
    var decls = comments();
    var decl;

    while (decl = declaration()) {
      decls.push(decl);
      decls = decls.concat(comments());
    }

    if (!close()) return error("@font-face missing '}'");
    return pos({
      type: 'font-face',
      declarations: decls
    });
  }

  var atimport = _compileAtrule('import');

  var atcharset = _compileAtrule('charset');

  var atnamespace = _compileAtrule('namespace');

  function _compileAtrule(name) {
    var re = new RegExp('^@' + name + '\\s*([^;]+);');
    return function () {
      var pos = position();
      var m = match(re);
      if (!m) return;
      var ret = {
        type: name
      };
      ret[name] = m[1].trim();
      return pos(ret);
    };
  }

  function atrule() {
    if (css[0] != '@') return;
    return atkeyframes() || atmedia() || atcustommedia() || atsupports() || atimport() || atcharset() || atnamespace() || atdocument() || atpage() || athost() || atfontface();
  }

  function rule() {
    var pos = position();
    var sel = selector();
    if (!sel) return error('selector missing');
    comments();
    return pos({
      type: 'rule',
      selectors: sel,
      declarations: declarations()
    });
  }

  return addParent(stylesheet());
};

function trim(str) {
  return str ? str.replace(/^\s+|\s+$/g, '') : '';
}

function addParent(obj, parent) {
  var isNode = obj && typeof obj.type === 'string';
  var childParent = isNode ? obj : parent;

  for (var k in obj) {
    var value = obj[k];

    if (Array.isArray(value)) {
      value.forEach(function (v) {
        addParent(v, childParent);
      });
    } else if (value && typeof value === 'object') {
      addParent(value, childParent);
    }
  }

  if (isNode) {
    Object.defineProperty(obj, 'parent', {
      configurable: true,
      writable: true,
      enumerable: false,
      value: parent || null
    });
  }

  return obj;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImNvbW1lbnRyZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJjc3MiLCJvcHRpb25zIiwibGluZW5vIiwiY29sdW1uIiwidXBkYXRlUG9zaXRpb24iLCJzdHIiLCJsaW5lcyIsIm1hdGNoIiwibGVuZ3RoIiwiaSIsImxhc3RJbmRleE9mIiwicG9zaXRpb24iLCJzdGFydCIsImxpbmUiLCJub2RlIiwiUG9zaXRpb24iLCJ3aGl0ZXNwYWNlIiwiZW5kIiwic291cmNlIiwicHJvdG90eXBlIiwiY29udGVudCIsImVycm9yc0xpc3QiLCJlcnJvciIsIm1zZyIsImVyciIsIkVycm9yIiwicmVhc29uIiwiZmlsZW5hbWUiLCJzaWxlbnQiLCJwdXNoIiwic3R5bGVzaGVldCIsInJ1bGVzTGlzdCIsInJ1bGVzIiwidHlwZSIsInBhcnNpbmdFcnJvcnMiLCJvcGVuIiwiY2xvc2UiLCJjb21tZW50cyIsImNoYXJBdCIsImF0cnVsZSIsInJ1bGUiLCJyZSIsIm0iLCJleGVjIiwic2xpY2UiLCJjIiwiY29tbWVudCIsInBvcyIsInNlbGVjdG9yIiwidHJpbSIsInJlcGxhY2UiLCJzcGxpdCIsIm1hcCIsInMiLCJkZWNsYXJhdGlvbiIsInByb3AiLCJ2YWwiLCJyZXQiLCJwcm9wZXJ0eSIsInZhbHVlIiwiZGVjbGFyYXRpb25zIiwiZGVjbHMiLCJkZWNsIiwia2V5ZnJhbWUiLCJ2YWxzIiwidmFsdWVzIiwiYXRrZXlmcmFtZXMiLCJ2ZW5kb3IiLCJuYW1lIiwiZnJhbWUiLCJmcmFtZXMiLCJjb25jYXQiLCJrZXlmcmFtZXMiLCJhdHN1cHBvcnRzIiwic3VwcG9ydHMiLCJzdHlsZSIsImF0aG9zdCIsImF0bWVkaWEiLCJtZWRpYSIsImF0Y3VzdG9tbWVkaWEiLCJhdHBhZ2UiLCJzZWwiLCJzZWxlY3RvcnMiLCJhdGRvY3VtZW50IiwiZG9jIiwiZG9jdW1lbnQiLCJhdGZvbnRmYWNlIiwiYXRpbXBvcnQiLCJfY29tcGlsZUF0cnVsZSIsImF0Y2hhcnNldCIsImF0bmFtZXNwYWNlIiwiUmVnRXhwIiwiYWRkUGFyZW50Iiwib2JqIiwicGFyZW50IiwiaXNOb2RlIiwiY2hpbGRQYXJlbnQiLCJrIiwiQXJyYXkiLCJpc0FycmF5IiwiZm9yRWFjaCIsInYiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiZW51bWVyYWJsZSJdLCJtYXBwaW5ncyI6IkFBRUEsSUFBSUEsU0FBUyxHQUFHLGlDQUFoQjs7QUFFQUMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCLFVBQVNDLEdBQVQsRUFBY0MsT0FBZCxFQUFzQjtBQUNyQ0EsRUFBQUEsT0FBTyxHQUFHQSxPQUFPLElBQUksRUFBckI7QUFNQSxNQUFJQyxNQUFNLEdBQUcsQ0FBYjtBQUNBLE1BQUlDLE1BQU0sR0FBRyxDQUFiOztBQU1BLFdBQVNDLGNBQVQsQ0FBd0JDLEdBQXhCLEVBQTZCO0FBQzNCLFFBQUlDLEtBQUssR0FBR0QsR0FBRyxDQUFDRSxLQUFKLENBQVUsS0FBVixDQUFaO0FBQ0EsUUFBSUQsS0FBSixFQUFXSixNQUFNLElBQUlJLEtBQUssQ0FBQ0UsTUFBaEI7QUFDWCxRQUFJQyxDQUFDLEdBQUdKLEdBQUcsQ0FBQ0ssV0FBSixDQUFnQixJQUFoQixDQUFSO0FBQ0FQLElBQUFBLE1BQU0sR0FBRyxDQUFDTSxDQUFELEdBQUtKLEdBQUcsQ0FBQ0csTUFBSixHQUFhQyxDQUFsQixHQUFzQk4sTUFBTSxHQUFHRSxHQUFHLENBQUNHLE1BQTVDO0FBQ0Q7O0FBTUQsV0FBU0csUUFBVCxHQUFvQjtBQUNsQixRQUFJQyxLQUFLLEdBQUc7QUFBRUMsTUFBQUEsSUFBSSxFQUFFWCxNQUFSO0FBQWdCQyxNQUFBQSxNQUFNLEVBQUVBO0FBQXhCLEtBQVo7QUFDQSxXQUFPLFVBQVNXLElBQVQsRUFBYztBQUNuQkEsTUFBQUEsSUFBSSxDQUFDSCxRQUFMLEdBQWdCLElBQUlJLFFBQUosQ0FBYUgsS0FBYixDQUFoQjtBQUNBSSxNQUFBQSxVQUFVO0FBQ1YsYUFBT0YsSUFB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QVFxQyxXQUFSLENBQVQ7QUFDRDtBQUNGOztBQUVELE1BQUlELE1BQUosRUFBWTtBQUNWTyxJQUFBQSxNQUFNLENBQUNDLGNBQVAsQ0FBc0JWLEdBQXRCLEVBQTJCLFFBQTNCLEVBQXFDO0FBQ25DVyxNQUFBQSxZQUFZLEVBQUUsSUFEcUI7QUFFbkNDLE1BQUFBLFFBQVEsRUFBRSxJQUZ5QjtBQUduQ0MsTUFBQUEsVUFBVSxFQUFFLEtBSHVCO0FBSW5DL0MsTUFBQUEsS0FBSyxFQUFFbUMsTUFBTSxJQUFJO0FBSmtCLEtBQXJDO0FBTUQ7O0FBRUQsU0FBT0QsR0FBUDtBQUNEIiwic291cmNlc0NvbnRlbnQiOlsiLy8gaHR0cDovL3d3dy53My5vcmcvVFIvQ1NTMjEvZ3JhbW1hci5odG1sXG4vLyBodHRwczovL2dpdGh1Yi5jb20vdmlzaW9ubWVkaWEvY3NzLXBhcnNlL3B1bGwvNDkjaXNzdWVjb21tZW50LTMwMDg4MDI3XG52YXIgY29tbWVudHJlID0gL1xcL1xcKlteKl0qXFwqKyhbXi8qXVteKl0qXFwqKykqXFwvL2dcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihjc3MsIG9wdGlvbnMpe1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAvKipcbiAgICogUG9zaXRpb25hbC5cbiAgICovXG5cbiAgdmFyIGxpbmVubyA9IDE7XG4gIHZhciBjb2x1bW4gPSAxO1xuXG4gIC8qKlxuICAgKiBVcGRhdGUgbGluZW5vIGFuZCBjb2x1bW4gYmFzZWQgb24gYHN0cmAuXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHVwZGF0ZVBvc2l0aW9uKHN0cikge1xuICAgIHZhciBsaW5lcyA9IHN0ci5tYXRjaCgvXFxuL2cpO1xuICAgIGlmIChsaW5lcykgbGluZW5vICs9IGxpbmVzLmxlbmd0aDtcbiAgICB2YXIgaSA9IHN0ci5sYXN0SW5kZXhPZignXFxuJyk7XG4gICAgY29sdW1uID0gfmkgPyBzdHIubGVuZ3RoIC0gaSA6IGNvbHVtbiArIHN0ci5sZW5ndGg7XG4gIH1cblxuICAvKipcbiAgICogTWFyayBwb3NpdGlvbiBhbmQgcGF0Y2ggYG5vZGUucG9zaXRpb25gLlxuICAgKi9cblxuICBmdW5jdGlvbiBwb3NpdGlvbigpIHtcbiAgICB2YXIgc3RhcnQgPSB7IGxpbmU6IGxpbmVubywgY29sdW1uOiBjb2x1bW4gfTtcbiAgICByZXR1cm4gZnVuY3Rpb24obm9kZSl7XG4gICAgICBub2RlLnBvc2l0aW9uID0gbmV3IFBvc2l0aW9uKHN0YXJ0KTtcbiAgICAgIHdoaXRlc3BhY2UoKTtcbiAgICAgIHJldHVybiBub2RlO1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogU3RvcmUgcG9zaXRpb24gaW5mb3JtYXRpb24gZm9yIGEgbm9kZVxuICAgKi9cblxuICBmdW5jdGlvbiBQb3NpdGlvbihzdGFydCkge1xuICAgIHRoaXMuc3RhcnQgPSBzdGFydDtcbiAgICB0aGlzLmVuZCA9IHsgbGluZTogbGluZW5vLCBjb2x1bW46IGNvbHVtbiB9O1xuICAgIHRoaXMuc291cmNlID0gb3B0aW9ucy5zb3VyY2U7XG4gIH1cblxuICAvKipcbiAgICogTm9uLWVudW1lcmFibGUgc291cmNlIHN0cmluZ1xuICAgKi9cblxuICBQb3NpdGlvbi5wcm90b3R5cGUuY29udGVudCA9IGNzcztcblxuICAvKipcbiAgICogRXJyb3IgYG1zZ2AuXG4gICAqL1xuXG4gIHZhciBlcnJvcnNMaXN0ID0gW107XG5cbiAgZnVuY3Rpb24gZXJyb3IobXNnKSB7XG4gICAgdmFyIGVyciA9IG5ldyBFcnJvcihvcHRpb25zLnNvdXJjZSArICc6JyArIGxpbmVubyArICc6JyArIGNvbHVtbiArICc6ICcgKyBtc2cpO1xuICAgIGVyci5yZWFzb24gPSBtc2c7XG4gICAgZXJyLmZpbGVuYW1lID0gb3B0aW9ucy5zb3VyY2U7XG4gICAgZXJyLmxpbmUgPSBsaW5lbm87XG4gICAgZXJyLmNvbHVtbiA9IGNvbHVtbjtcbiAgICBlcnIuc291cmNlID0gY3NzO1xuXG4gICAgaWYgKG9wdGlvbnMuc2lsZW50KSB7XG4gICAgICBlcnJvcnNMaXN0LnB1c2goZXJyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZSBzdHlsZXNoZWV0LlxuICAgKi9cblxuICBmdW5jdGlvbiBzdHlsZXNoZWV0KCkge1xuICAgIHZhciBydWxlc0xpc3QgPSBydWxlcygpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6ICdzdHlsZXNoZWV0JyxcbiAgICAgIHN0eWxlc2hlZXQ6IHtcbiAgICAgICAgc291cmNlOiBvcHRpb25zLnNvdXJjZSxcbiAgICAgICAgcnVsZXM6IHJ1bGVzTGlzdCxcbiAgICAgICAgcGFyc2luZ0Vycm9yczogZXJyb3JzTGlzdFxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogT3BlbmluZyBicmFjZS5cbiAgICovXG5cbiAgZnVuY3Rpb24gb3BlbigpIHtcbiAgICByZXR1cm4gbWF0Y2goL157XFxzKi8pO1xuICB9XG5cbiAgLyoqXG4gICAqIENsb3NpbmcgYnJhY2UuXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGNsb3NlKCkge1xuICAgIHJldHVybiBtYXRjaCgvXn0vKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZSBydWxlc2V0LlxuICAgKi9cblxuICBmdW5jdGlvbiBydWxlcygpIHtcbiAgICB2YXIgbm9kZTtcbiAgICB2YXIgcnVsZXMgPSBbXTtcbiAgICB3aGl0ZXNwYWNlKCk7XG4gICAgY29tbWVudHMocnVsZXMpO1xuICAgIHdoaWxlIChjc3MubGVuZ3RoICYmIGNzcy5jaGFyQXQoMCkgIT0gJ30nICYmIChub2RlID0gYXRydWxlKCkgfHwgcnVsZSgpKSkge1xuICAgICAgaWYgKG5vZGUgIT09IGZhbHNlKSB7XG4gICAgICAgIHJ1bGVzLnB1c2gobm9kZSk7XG4gICAgICAgIGNvbW1lbnRzKHJ1bGVzKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJ1bGVzO1xuICB9XG5cbiAgLyoqXG4gICAqIE1hdGNoIGByZWAgYW5kIHJldHVybiBjYXB0dXJlcy5cbiAgICovXG5cbiAgZnVuY3Rpb24gbWF0Y2gocmUpIHtcbiAgICB2YXIgbSA9IHJlLmV4ZWMoY3NzKTtcbiAgICBpZiAoIW0pIHJldHVybjtcbiAgICB2YXIgc3RyID0gbVswXTtcbiAgICB1cGRhdGVQb3NpdGlvbihzdHIpO1xuICAgIGNzcyA9IGNzcy5zbGljZShzdHIubGVuZ3RoKTtcbiAgICByZXR1cm4gbTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZSB3aGl0ZXNwYWNlLlxuICAgKi9cblxuICBmdW5jdGlvbiB3aGl0ZXNwYWNlKCkge1xuICAgIG1hdGNoKC9eXFxzKi8pO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlIGNvbW1lbnRzO1xuICAgKi9cblxuICBmdW5jdGlvbiBjb21tZW50cyhydWxlcykge1xuICAgIHZhciBjO1xuICAgIHJ1bGVzID0gcnVsZXMgfHwgW107XG4gICAgd2hpbGUgKGMgPSBjb21tZW50KCkpIHtcbiAgICAgIGlmIChjICE9PSBmYWxzZSkge1xuICAgICAgICBydWxlcy5wdXNoKGMpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcnVsZXM7XG4gIH1cblxuICAvKipcbiAgICogUGFyc2UgY29tbWVudC5cbiAgICovXG5cbiAgZnVuY3Rpb24gY29tbWVudCgpIHtcbiAgICB2YXIgcG9zID0gcG9zaXRpb24oKTtcbiAgICBpZiAoJy8nICE9IGNzcy5jaGFyQXQoMCkgfHwgJyonICE9IGNzcy5jaGFyQXQoMSkpIHJldHVybjtcblxuICAgIHZhciBpID0gMjtcbiAgICB3aGlsZSAoXCJcIiAhPSBjc3MuY2hhckF0KGkpICYmICgnKicgIT0gY3NzLmNoYXJBdChpKSB8fCAnLycgIT0gY3NzLmNoYXJBdChpICsgMSkpKSArK2k7XG4gICAgaSArPSAyO1xuXG4gICAgaWYgKFwiXCIgPT09IGNzcy5jaGFyQXQoaS0xKSkge1xuICAgICAgcmV0dXJuIGVycm9yKCdFbmQgb2YgY29tbWVudCBtaXNzaW5nJyk7XG4gICAgfVxuXG4gICAgdmFyIHN0ciA9IGNzcy5zbGljZSgyLCBpIC0gMik7XG4gICAgY29sdW1uICs9IDI7XG4gICAgdXBkYXRlUG9zaXRpb24oc3RyKTtcbiAgICBjc3MgPSBjc3Muc2xpY2UoaSk7XG4gICAgY29sdW1uICs9IDI7XG5cbiAgICByZXR1cm4gcG9zKHtcbiAgICAgIHR5cGU6ICdjb21tZW50JyxcbiAgICAgIGNvbW1lbnQ6IHN0clxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlIHNlbGVjdG9yLlxuICAgKi9cblxuICBmdW5jdGlvbiBzZWxlY3RvcigpIHtcbiAgICB2YXIgbSA9IG1hdGNoKC9eKFtee10rKS8pO1xuICAgIGlmICghbSkgcmV0dXJuO1xuICAgIC8qIEBmaXggUmVtb3ZlIGFsbCBjb21tZW50cyBmcm9tIHNlbGVjdG9yc1xuICAgICAqIGh0dHA6Ly9vc3Rlcm1pbGxlci5vcmcvZmluZGNvbW1lbnQuaHRtbCAqL1xuICAgIHJldHVybiB0cmltKG1bMF0pXG4gICAgICAucmVwbGFjZSgvXFwvXFwqKFteKl18W1xcclxcbl18KFxcKisoW14qL118W1xcclxcbl0pKSkqXFwqXFwvKy9nLCAnJylcbiAgICAgIC5yZXBsYWNlKC9cIig/OlxcXFxcInxbXlwiXSkqXCJ8Jyg/OlxcXFwnfFteJ10pKicvZywgZnVuY3Rpb24obSkge1xuICAgICAgICByZXR1cm4gbS5yZXBsYWNlKC8sL2csICdcXHUyMDBDJyk7XG4gICAgICB9KVxuICAgICAgLnNwbGl0KC9cXHMqKD8hW14oXSpcXCkpLFxccyovKVxuICAgICAgLm1hcChmdW5jdGlvbihzKSB7XG4gICAgICAgIHJldHVybiBzLnJlcGxhY2UoL1xcdTIwMEMvZywgJywnKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlIGRlY2xhcmF0aW9uLlxuICAgKi9cblxuICBmdW5jdGlvbiBkZWNsYXJhdGlvbigpIHtcbiAgICB2YXIgcG9zID0gcG9zaXRpb24oKTtcblxuICAgIC8vIHByb3BcbiAgICB2YXIgcHJvcCA9IG1hdGNoKC9eKFxcKj9bLSNcXC9cXCpcXFxcXFx3XSsoXFxbWzAtOWEtel8tXStcXF0pPylcXHMqLyk7XG4gICAgaWYgKCFwcm9wKSByZXR1cm47XG4gICAgcHJvcCA9IHRyaW0ocHJvcFswXSk7XG5cbiAgICAvLyA6XG4gICAgaWYgKCFtYXRjaCgvXjpcXHMqLykpIHJldHVybiBlcnJvcihcInByb3BlcnR5IG1pc3NpbmcgJzonXCIpO1xuXG4gICAgLy8gdmFsXG4gICAgdmFyIHZhbCA9IG1hdGNoKC9eKCg/OicoPzpcXFxcJ3wuKSo/J3xcIig/OlxcXFxcInwuKSo/XCJ8XFwoW15cXCldKj9cXCl8W159O10pKykvKTtcblxuICAgIHZhciByZXQgPSBwb3Moe1xuICAgICAgdHlwZTogJ2RlY2xhcmF0aW9uJyxcbiAgICAgIHByb3BlcnR5OiBwcm9wLnJlcGxhY2UoY29tbWVudHJlLCAnJyksXG4gICAgICB2YWx1ZTogdmFsID8gdHJpbSh2YWxbMF0pLnJlcGxhY2UoY29tbWVudHJlLCAnJykgOiAnJ1xuICAgIH0pO1xuXG4gICAgLy8gO1xuICAgIG1hdGNoKC9eWztcXHNdKi8pO1xuXG4gICAgcmV0dXJuIHJldDtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZSBkZWNsYXJhdGlvbnMuXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGRlY2xhcmF0aW9ucygpIHtcbiAgICB2YXIgZGVjbHMgPSBbXTtcblxuICAgIGlmICghb3BlbigpKSByZXR1cm4gZXJyb3IoXCJtaXNzaW5nICd7J1wiKTtcbiAgICBjb21tZW50cyhkZWNscyk7XG5cbiAgICAvLyBkZWNsYXJhdGlvbnNcbiAgICB2YXIgZGVjbDtcbiAgICB3aGlsZSAoZGVjbCA9IGRlY2xhcmF0aW9uKCkpIHtcbiAgICAgIGlmIChkZWNsICE9PSBmYWxzZSkge1xuICAgICAgICBkZWNscy5wdXNoKGRlY2wpO1xuICAgICAgICBjb21tZW50cyhkZWNscyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFjbG9zZSgpKSByZXR1cm4gZXJyb3IoXCJtaXNzaW5nICd9J1wiKTtcbiAgICByZXR1cm4gZGVjbHM7XG4gIH1cblxuICAvKipcbiAgICogUGFyc2Uga2V5ZnJhbWUuXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGtleWZyYW1lKCkge1xuICAgIHZhciBtO1xuICAgIHZhciB2YWxzID0gW107XG4gICAgdmFyIHBvcyA9IHBvc2l0aW9uKCk7XG5cbiAgICB3aGlsZSAobSA9IG1hdGNoKC9eKChcXGQrXFwuXFxkK3xcXC5cXGQrfFxcZCspJT98W2Etel0rKVxccyovKSkge1xuICAgICAgdmFscy5wdXNoKG1bMV0pO1xuICAgICAgbWF0Y2goL14sXFxzKi8pO1xuICAgIH1cblxuICAgIGlmICghdmFscy5sZW5ndGgpIHJldHVybjtcblxuICAgIHJldHVybiBwb3Moe1xuICAgICAgdHlwZTogJ2tleWZyYW1lJyxcbiAgICAgIHZhbHVlczogdmFscyxcbiAgICAgIGRlY2xhcmF0aW9uczogZGVjbGFyYXRpb25zKClcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZSBrZXlmcmFtZXMuXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGF0a2V5ZnJhbWVzKCkge1xuICAgIHZhciBwb3MgPSBwb3NpdGlvbigpO1xuICAgIHZhciBtID0gbWF0Y2goL15AKFstXFx3XSspP2tleWZyYW1lc1xccyovKTtcblxuICAgIGlmICghbSkgcmV0dXJuO1xuICAgIHZhciB2ZW5kb3IgPSBtWzFdO1xuXG4gICAgLy8gaWRlbnRpZmllclxuICAgIHZhciBtID0gbWF0Y2goL14oWy1cXHddKylcXHMqLyk7XG4gICAgaWYgKCFtKSByZXR1cm4gZXJyb3IoXCJAa2V5ZnJhbWVzIG1pc3NpbmcgbmFtZVwiKTtcbiAgICB2YXIgbmFtZSA9IG1bMV07XG5cbiAgICBpZiAoIW9wZW4oKSkgcmV0dXJuIGVycm9yKFwiQGtleWZyYW1lcyBtaXNzaW5nICd7J1wiKTtcblxuICAgIHZhciBmcmFtZTtcbiAgICB2YXIgZnJhbWVzID0gY29tbWVudHMoKTtcbiAgICB3aGlsZSAoZnJhbWUgPSBrZXlmcmFtZSgpKSB7XG4gICAgICBmcmFtZXMucHVzaChmcmFtZSk7XG4gICAgICBmcmFtZXMgPSBmcmFtZXMuY29uY2F0KGNvbW1lbnRzKCkpO1xuICAgIH1cblxuICAgIGlmICghY2xvc2UoKSkgcmV0dXJuIGVycm9yKFwiQGtleWZyYW1lcyBtaXNzaW5nICd9J1wiKTtcblxuICAgIHJldHVybiBwb3Moe1xuICAgICAgdHlwZTogJ2tleWZyYW1lcycsXG4gICAgICBuYW1lOiBuYW1lLFxuICAgICAgdmVuZG9yOiB2ZW5kb3IsXG4gICAgICBrZXlmcmFtZXM6IGZyYW1lc1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlIHN1cHBvcnRzLlxuICAgKi9cblxuICBmdW5jdGlvbiBhdHN1cHBvcnRzKCkge1xuICAgIHZhciBwb3MgPSBwb3NpdGlvbigpO1xuICAgIHZhciBtID0gbWF0Y2goL15Ac3VwcG9ydHMgKihbXntdKykvKTtcblxuICAgIGlmICghbSkgcmV0dXJuO1xuICAgIHZhciBzdXBwb3J0cyA9IHRyaW0obVsxXSk7XG5cbiAgICBpZiAoIW9wZW4oKSkgcmV0dXJuIGVycm9yKFwiQHN1cHBvcnRzIG1pc3NpbmcgJ3snXCIpO1xuXG4gICAgdmFyIHN0eWxlID0gY29tbWVudHMoKS5jb25jYXQocnVsZXMoKSk7XG5cbiAgICBpZiAoIWNsb3NlKCkpIHJldHVybiBlcnJvcihcIkBzdXBwb3J0cyBtaXNzaW5nICd9J1wiKTtcblxuICAgIHJldHVybiBwb3Moe1xuICAgICAgdHlwZTogJ3N1cHBvcnRzJyxcbiAgICAgIHN1cHBvcnRzOiBzdXBwb3J0cyxcbiAgICAgIHJ1bGVzOiBzdHlsZVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlIGhvc3QuXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGF0aG9zdCgpIHtcbiAgICB2YXIgcG9zID0gcG9zaXRpb24oKTtcbiAgICB2YXIgbSA9IG1hdGNoKC9eQGhvc3RcXHMqLyk7XG5cbiAgICBpZiAoIW0pIHJldHVybjtcblxuICAgIGlmICghb3BlbigpKSByZXR1cm4gZXJyb3IoXCJAaG9zdCBtaXNzaW5nICd7J1wiKTtcblxuICAgIHZhciBzdHlsZSA9IGNvbW1lbnRzKCkuY29uY2F0KHJ1bGVzKCkpO1xuXG4gICAgaWYgKCFjbG9zZSgpKSByZXR1cm4gZXJyb3IoXCJAaG9zdCBtaXNzaW5nICd9J1wiKTtcblxuICAgIHJldHVybiBwb3Moe1xuICAgICAgdHlwZTogJ2hvc3QnLFxuICAgICAgcnVsZXM6IHN0eWxlXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUGFyc2UgbWVkaWEuXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGF0bWVkaWEoKSB7XG4gICAgdmFyIHBvcyA9IHBvc2l0aW9uKCk7XG4gICAgdmFyIG0gPSBtYXRjaCgvXkBtZWRpYSAqKFtee10rKS8pO1xuXG4gICAgaWYgKCFtKSByZXR1cm47XG4gICAgdmFyIG1lZGlhID0gdHJpbShtWzFdKTtcblxuICAgIGlmICghb3BlbigpKSByZXR1cm4gZXJyb3IoXCJAbWVkaWEgbWlzc2luZyAneydcIik7XG5cbiAgICB2YXIgc3R5bGUgPSBjb21tZW50cygpLmNvbmNhdChydWxlcygpKTtcblxuICAgIGlmICghY2xvc2UoKSkgcmV0dXJuIGVycm9yKFwiQG1lZGlhIG1pc3NpbmcgJ30nXCIpO1xuXG4gICAgcmV0dXJuIHBvcyh7XG4gICAgICB0eXBlOiAnbWVkaWEnLFxuICAgICAgbWVkaWE6IG1lZGlhLFxuICAgICAgcnVsZXM6IHN0eWxlXG4gICAgfSk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBQYXJzZSBjdXN0b20tbWVkaWEuXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGF0Y3VzdG9tbWVkaWEoKSB7XG4gICAgdmFyIHBvcyA9IHBvc2l0aW9uKCk7XG4gICAgdmFyIG0gPSBtYXRjaCgvXkBjdXN0b20tbWVkaWFcXHMrKC0tW15cXHNdKylcXHMqKFteeztdKyk7Lyk7XG4gICAgaWYgKCFtKSByZXR1cm47XG5cbiAgICByZXR1cm4gcG9zKHtcbiAgICAgIHR5cGU6ICdjdXN0b20tbWVkaWEnLFxuICAgICAgbmFtZTogdHJpbShtWzFdKSxcbiAgICAgIG1lZGlhOiB0cmltKG1bMl0pXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUGFyc2UgcGFnZWQgbWVkaWEuXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGF0cGFnZSgpIHtcbiAgICB2YXIgcG9zID0gcG9zaXRpb24oKTtcbiAgICB2YXIgbSA9IG1hdGNoKC9eQHBhZ2UgKi8pO1xuICAgIGlmICghbSkgcmV0dXJuO1xuXG4gICAgdmFyIHNlbCA9IHNlbGVjdG9yKCkgfHwgW107XG5cbiAgICBpZiAoIW9wZW4oKSkgcmV0dXJuIGVycm9yKFwiQHBhZ2UgbWlzc2luZyAneydcIik7XG4gICAgdmFyIGRlY2xzID0gY29tbWVudHMoKTtcblxuICAgIC8vIGRlY2xhcmF0aW9uc1xuICAgIHZhciBkZWNsO1xuICAgIHdoaWxlIChkZWNsID0gZGVjbGFyYXRpb24oKSkge1xuICAgICAgZGVjbHMucHVzaChkZWNsKTtcbiAgICAgIGRlY2xzID0gZGVjbHMuY29uY2F0KGNvbW1lbnRzKCkpO1xuICAgIH1cblxuICAgIGlmICghY2xvc2UoKSkgcmV0dXJuIGVycm9yKFwiQHBhZ2UgbWlzc2luZyAnfSdcIik7XG5cbiAgICByZXR1cm4gcG9zKHtcbiAgICAgIHR5cGU6ICdwYWdlJyxcbiAgICAgIHNlbGVjdG9yczogc2VsLFxuICAgICAgZGVjbGFyYXRpb25zOiBkZWNsc1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlIGRvY3VtZW50LlxuICAgKi9cblxuICBmdW5jdGlvbiBhdGRvY3VtZW50KCkge1xuICAgIHZhciBwb3MgPSBwb3NpdGlvbigpO1xuICAgIHZhciBtID0gbWF0Y2goL15AKFstXFx3XSspP2RvY3VtZW50ICooW157XSspLyk7XG4gICAgaWYgKCFtKSByZXR1cm47XG5cbiAgICB2YXIgdmVuZG9yID0gdHJpbShtWzFdKTtcbiAgICB2YXIgZG9jID0gdHJpbShtWzJdKTtcblxuICAgIGlmICghb3BlbigpKSByZXR1cm4gZXJyb3IoXCJAZG9jdW1lbnQgbWlzc2luZyAneydcIik7XG5cbiAgICB2YXIgc3R5bGUgPSBjb21tZW50cygpLmNvbmNhdChydWxlcygpKTtcblxuICAgIGlmICghY2xvc2UoKSkgcmV0dXJuIGVycm9yKFwiQGRvY3VtZW50IG1pc3NpbmcgJ30nXCIpO1xuXG4gICAgcmV0dXJuIHBvcyh7XG4gICAgICB0eXBlOiAnZG9jdW1lbnQnLFxuICAgICAgZG9jdW1lbnQ6IGRvYyxcbiAgICAgIHZlbmRvcjogdmVuZG9yLFxuICAgICAgcnVsZXM6IHN0eWxlXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUGFyc2UgZm9udC1mYWNlLlxuICAgKi9cblxuICBmdW5jdGlvbiBhdGZvbnRmYWNlKCkge1xuICAgIHZhciBwb3MgPSBwb3NpdGlvbigpO1xuICAgIHZhciBtID0gbWF0Y2goL15AZm9udC1mYWNlXFxzKi8pO1xuICAgIGlmICghbSkgcmV0dXJuO1xuXG4gICAgaWYgKCFvcGVuKCkpIHJldHVybiBlcnJvcihcIkBmb250LWZhY2UgbWlzc2luZyAneydcIik7XG4gICAgdmFyIGRlY2xzID0gY29tbWVudHMoKTtcblxuICAgIC8vIGRlY2xhcmF0aW9uc1xuICAgIHZhciBkZWNsO1xuICAgIHdoaWxlIChkZWNsID0gZGVjbGFyYXRpb24oKSkge1xuICAgICAgZGVjbHMucHVzaChkZWNsKTtcbiAgICAgIGRlY2xzID0gZGVjbHMuY29uY2F0KGNvbW1lbnRzKCkpO1xuICAgIH1cblxuICAgIGlmICghY2xvc2UoKSkgcmV0dXJuIGVycm9yKFwiQGZvbnQtZmFjZSBtaXNzaW5nICd9J1wiKTtcblxuICAgIHJldHVybiBwb3Moe1xuICAgICAgdHlwZTogJ2ZvbnQtZmFjZScsXG4gICAgICBkZWNsYXJhdGlvbnM6IGRlY2xzXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUGFyc2UgaW1wb3J0XG4gICAqL1xuXG4gIHZhciBhdGltcG9ydCA9IF9jb21waWxlQXRydWxlKCdpbXBvcnQnKTtcblxuICAvKipcbiAgICogUGFyc2UgY2hhcnNldFxuICAgKi9cblxuICB2YXIgYXRjaGFyc2V0ID0gX2NvbXBpbGVBdHJ1bGUoJ2NoYXJzZXQnKTtcblxuICAvKipcbiAgICogUGFyc2UgbmFtZXNwYWNlXG4gICAqL1xuXG4gIHZhciBhdG5hbWVzcGFjZSA9IF9jb21waWxlQXRydWxlKCduYW1lc3BhY2UnKTtcblxuICAvKipcbiAgICogUGFyc2Ugbm9uLWJsb2NrIGF0LXJ1bGVzXG4gICAqL1xuXG5cbiAgZnVuY3Rpb24gX2NvbXBpbGVBdHJ1bGUobmFtZSkge1xuICAgIHZhciByZSA9IG5ldyBSZWdFeHAoJ15AJyArIG5hbWUgKyAnXFxcXHMqKFteO10rKTsnKTtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcG9zID0gcG9zaXRpb24oKTtcbiAgICAgIHZhciBtID0gbWF0Y2gocmUpO1xuICAgICAgaWYgKCFtKSByZXR1cm47XG4gICAgICB2YXIgcmV0ID0geyB0eXBlOiBuYW1lIH07XG4gICAgICByZXRbbmFtZV0gPSBtWzFdLnRyaW0oKTtcbiAgICAgIHJldHVybiBwb3MocmV0KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUGFyc2UgYXQgcnVsZS5cbiAgICovXG5cbiAgZnVuY3Rpb24gYXRydWxlKCkge1xuICAgIGlmIChjc3NbMF0gIT0gJ0AnKSByZXR1cm47XG5cbiAgICByZXR1cm4gYXRrZXlmcmFtZXMoKVxuICAgICAgfHwgYXRtZWRpYSgpXG4gICAgICB8fCBhdGN1c3RvbW1lZGlhKClcbiAgICAgIHx8IGF0c3VwcG9ydHMoKVxuICAgICAgfHwgYXRpbXBvcnQoKVxuICAgICAgfHwgYXRjaGFyc2V0KClcbiAgICAgIHx8IGF0bmFtZXNwYWNlKClcbiAgICAgIHx8IGF0ZG9jdW1lbnQoKVxuICAgICAgfHwgYXRwYWdlKClcbiAgICAgIHx8IGF0aG9zdCgpXG4gICAgICB8fCBhdGZvbnRmYWNlKCk7XG4gIH1cblxuICAvKipcbiAgICogUGFyc2UgcnVsZS5cbiAgICovXG5cbiAgZnVuY3Rpb24gcnVsZSgpIHtcbiAgICB2YXIgcG9zID0gcG9zaXRpb24oKTtcbiAgICB2YXIgc2VsID0gc2VsZWN0b3IoKTtcblxuICAgIGlmICghc2VsKSByZXR1cm4gZXJyb3IoJ3NlbGVjdG9yIG1pc3NpbmcnKTtcbiAgICBjb21tZW50cygpO1xuXG4gICAgcmV0dXJuIHBvcyh7XG4gICAgICB0eXBlOiAncnVsZScsXG4gICAgICBzZWxlY3RvcnM6IHNlbCxcbiAgICAgIGRlY2xhcmF0aW9uczogZGVjbGFyYXRpb25zKClcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBhZGRQYXJlbnQoc3R5bGVzaGVldCgpKTtcbn07XG5cbi8qKlxuICogVHJpbSBgc3RyYC5cbiAqL1xuXG5mdW5jdGlvbiB0cmltKHN0cikge1xuICByZXR1cm4gc3RyID8gc3RyLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKSA6ICcnO1xufVxuXG4vKipcbiAqIEFkZHMgbm9uLWVudW1lcmFibGUgcGFyZW50IG5vZGUgcmVmZXJlbmNlIHRvIGVhY2ggbm9kZS5cbiAqL1xuXG5mdW5jdGlvbiBhZGRQYXJlbnQob2JqLCBwYXJlbnQpIHtcbiAgdmFyIGlzTm9kZSA9IG9iaiAmJiB0eXBlb2Ygb2JqLnR5cGUgPT09ICdzdHJpbmcnO1xuICB2YXIgY2hpbGRQYXJlbnQgPSBpc05vZGUgPyBvYmogOiBwYXJlbnQ7XG5cbiAgZm9yICh2YXIgayBpbiBvYmopIHtcbiAgICB2YXIgdmFsdWUgPSBvYmpba107XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICB2YWx1ZS5mb3JFYWNoKGZ1bmN0aW9uKHYpIHsgYWRkUGFyZW50KHYsIGNoaWxkUGFyZW50KTsgfSk7XG4gICAgfSBlbHNlIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgICBhZGRQYXJlbnQodmFsdWUsIGNoaWxkUGFyZW50KTtcbiAgICB9XG4gIH1cblxuICBpZiAoaXNOb2RlKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgJ3BhcmVudCcsIHtcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICB2YWx1ZTogcGFyZW50IHx8IG51bGxcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBvYmo7XG59XG4iXX0=