b0398cf2ca047f5008c66496affe2c40
var Base = require('./compiler');

var inherits = require('inherits');

module.exports = Compiler;

function Compiler(options) {
  options = options || {};
  Base.call(this, options);
  this.indentation = options.indent;
}

inherits(Compiler, Base);

Compiler.prototype.compile = function (node) {
  return this.stylesheet(node);
};

Compiler.prototype.stylesheet = function (node) {
  return this.mapVisit(node.stylesheet.rules, '\n\n');
};

Compiler.prototype.comment = function (node) {
  return this.emit(this.indent() + '/*' + node.comment + '*/', node.position);
};

Compiler.prototype.import = function (node) {
  return this.emit('@import ' + node.import + ';', node.position);
};

Compiler.prototype.media = function (node) {
  return this.emit('@media ' + node.media, node.position) + this.emit(' {\n' + this.indent(1)) + this.mapVisit(node.rules, '\n\n') + this.emit(this.indent(-1) + '\n}');
};

Compiler.prototype.document = function (node) {
  var doc = '@' + (node.vendor || '') + 'document ' + node.document;
  return this.emit(doc, node.position) + this.emit(' ' + ' {\n' + this.indent(1)) + this.mapVisit(node.rules, '\n\n') + this.emit(this.indent(-1) + '\n}');
};

Compiler.prototype.charset = function (node) {
  return this.emit('@charset ' + node.charset + ';', node.position);
};

Compiler.prototype.namespace = function (node) {
  return this.emit('@namespace ' + node.namespace + ';', node.position);
};

Compiler.prototype.supports = function (node) {
  return this.emit('@supports ' + node.supports, node.position) + this.emit(' {\n' + this.indent(1)) + this.mapVisit(node.rules, '\n\n') + this.emit(this.indent(-1) + '\n}');
};

Compiler.prototype.keyframes = function (node) {
  return this.emit('@' + (node.vendor || '') + 'keyframes ' + node.name, node.position) + this.emit(' {\n' + this.indent(1)) + this.mapVisit(node.keyframes, '\n') + this.emit(this.indent(-1) + '}');
};

Compiler.prototype.keyframe = function (node) {
  var decls = node.declarations;
  return this.emit(this.indent()) + this.emit(node.values.join(', '), node.position) + this.emit(' {\n' + this.indent(1)) + this.mapVisit(decls, '\n') + this.emit(this.indent(-1) + '\n' + this.indent() + '}\n');
};

Compiler.prototype.page = function (node) {
  var sel = node.selectors.length ? node.selectors.join(', ') + ' ' : '';
  return this.emit('@page ' + sel, node.position) + this.emit('{\n') + this.emit(this.indent(1)) + this.mapVisit(node.declarations, '\n') + this.emit(this.indent(-1)) + this.emit('\n}');
};

Compiler.prototype['font-face'] = function (node) {
  return this.emit('@font-face ', node.position) + this.emit('{\n') + this.emit(this.indent(1)) + this.mapVisit(node.declarations, '\n') + this.emit(this.indent(-1)) + this.emit('\n}');
};

Compiler.prototype.host = function (node) {
  return this.emit('@host', node.position) + this.emit(' {\n' + this.indent(1)) + this.mapVisit(node.rules, '\n\n') + this.emit(this.indent(-1) + '\n}');
};

Compiler.prototype['custom-media'] = function (node) {
  return this.emit('@custom-media ' + node.name + ' ' + node.media + ';', node.position);
};

Compiler.prototype.rule = function (node) {
  var indent = this.indent();
  var decls = node.declarations;
  if (!decls.length) return '';
  return this.emit(node.selectors.map(function (s) {
    return indent + s;
  }).join(',\n'), node.position) + this.emit(' {\n') + this.emit(this.indent(1)) + this.mapVisit(decls, '\n') + this.emit(this.indent(-1)) + this.emit('\n' + this.indent() + '}');
};

Compiler.prototype.declaration = function (node) {
  return this.emit(this.indent()) + this.emit(node.property + ': ' + node.value, node.position) + this.emit(';');
};

Compiler.prototype.indent = function (level) {
  this.level = this.level || 1;

  if (null != level) {
    this.level += level;
    return '';
  }

  return Array(this.level).join(this.indentation || '  ');
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImlkZW50aXR5LmpzIl0sIm5hbWVzIjpbIkJhc2UiLCJyZXF1aXJlIiwiaW5oZXJpdHMiLCJtb2R1bGUiLCJleHBvcnRzIiwiQ29tcGlsZXIiLCJvcHRpb25zIiwiY2FsbCIsImluZGVudGF0aW9uIiwiaW5kZW50IiwicHJvdG90eXBlIiwiY29tcGlsZSIsIm5vZGUiLCJzdHlsZXNoZWV0IiwibWFwVmlzaXQiLCJydWxlcyIsImNvbW1lbnQiLCJlbWl0IiwicG9zaXRpb24iLCJpbXBvcnQiLCJtZWRpYSIsImRvY3VtZW50IiwiZG9jIiwidmVuZG9yIiwiY2hhcnNldCIsIm5hbWVzcGFjZSIsInN1cHBvcnRzIiwia2V5ZnJhbWVzIiwibmFtZSIsImtleWZyYW1lIiwiZGVjbHMiLCJkZWNsYXJhdGlvbnMiLCJ2YWx1ZXMiLCJqb2luIiwicGFnZSIsInNlbCIsInNlbGVjdG9ycyIsImxlbmd0aCIsImhvc3QiLCJydWxlIiwibWFwIiwicyIsImRlY2xhcmF0aW9uIiwicHJvcGVydHkiLCJ2YWx1ZSIsImxldmVsIiwiQXJyYXkiXSwibWFwcGluZ3MiOiJBQUtBLElBQUlBLElBQUksR0FBR0MsT0FBTyxDQUFDLFlBQUQsQ0FBbEI7O0FBQ0EsSUFBSUMsUUFBUSxHQUFHRCxPQUFPLENBQUMsVUFBRCxDQUF0Qjs7QUFNQUUsTUFBTSxDQUFDQyxPQUFQLEdBQWlCQyxRQUFqQjs7QUFNQSxTQUFTQSxRQUFULENBQWtCQyxPQUFsQixFQUEyQjtBQUN6QkEsRUFBQUEsT0FBTyxHQUFHQSxPQUFPLElBQUksRUFBckI7QUFDQU4sRUFBQUEsSUFBSSxDQUFDTyxJQUFMLENBQVUsSUFBVixFQUFnQkQsT0FBaEI7QUFDQSxPQUFLRSxXQUFMLEdBQW1CRixPQUFPLENBQUNHLE1BQTNCO0FBQ0Q7O0FBTURQLFFBQVEsQ0FBQ0csUUFBRCxFQUFXTCxJQUFYLENBQVI7O0FBTUFLLFFBQVEsQ0FBQ0ssU0FBVCxDQUFtQkMsT0FBbkIsR0FBNkIsVUFBU0MsSUFBVCxFQUFjO0FBQ3pDLFNB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Z0IsS0FBZCxFQUFxQixJQUFyQixDQUhHLEdBSUgsS0FBS2IsSUFBTCxDQUFVLEtBQUtSLE1BQUwsQ0FBWSxDQUFDLENBQWIsQ0FBVixDQUpHLEdBS0gsS0FBS1EsSUFBTCxDQUFVLE9BQU8sS0FBS1IsTUFBTCxFQUFQLEdBQXVCLEdBQWpDLENBTEo7QUFNRCxDQVhEOztBQWlCQUosUUFBUSxDQUFDSyxTQUFULENBQW1CZ0MsV0FBbkIsR0FBaUMsVUFBUzlCLElBQVQsRUFBYztBQUM3QyxTQUFPLEtBQUtLLElBQUwsQ0FBVSxLQUFLUixNQUFMLEVBQVYsSUFDSCxLQUFLUSxJQUFMLENBQVVMLElBQUksQ0FBQytCLFFBQUwsR0FBZ0IsSUFBaEIsR0FBdUIvQixJQUFJLENBQUNnQyxLQUF0QyxFQUE2Q2hDLElBQUksQ0FBQ00sUUFBbEQsQ0FERyxHQUVILEtBQUtELElBQUwsQ0FBVSxHQUFWLENBRko7QUFHRCxDQUpEOztBQVVBWixRQUFRLENBQUNLLFNBQVQsQ0FBbUJELE1BQW5CLEdBQTRCLFVBQVNvQyxLQUFULEVBQWdCO0FBQzFDLE9BQUtBLEtBQUwsR0FBYSxLQUFLQSxLQUFMLElBQWMsQ0FBM0I7O0FBRUEsTUFBSSxRQUFRQSxLQUFaLEVBQW1CO0FBQ2pCLFNBQUtBLEtBQUwsSUFBY0EsS0FBZDtBQUNBLFdBQU8sRUFBUDtBQUNEOztBQUVELFNBQU9DLEtBQUssQ0FBQyxLQUFLRCxLQUFOLENBQUwsQ0FBa0JaLElBQWxCLENBQXVCLEtBQUt6QixXQUFMLElBQW9CLElBQTNDLENBQVA7QUFDRCxDQVREIiwic291cmNlc0NvbnRlbnQiOlsiXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKi9cblxudmFyIEJhc2UgPSByZXF1aXJlKCcuL2NvbXBpbGVyJyk7XG52YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpO1xuXG4vKipcbiAqIEV4cG9zZSBjb21waWxlci5cbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IENvbXBpbGVyO1xuXG4vKipcbiAqIEluaXRpYWxpemUgYSBuZXcgYENvbXBpbGVyYC5cbiAqL1xuXG5mdW5jdGlvbiBDb21waWxlcihvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICBCYXNlLmNhbGwodGhpcywgb3B0aW9ucyk7XG4gIHRoaXMuaW5kZW50YXRpb24gPSBvcHRpb25zLmluZGVudDtcbn1cblxuLyoqXG4gKiBJbmhlcml0IGZyb20gYEJhc2UucHJvdG90eXBlYC5cbiAqL1xuXG5pbmhlcml0cyhDb21waWxlciwgQmFzZSk7XG5cbi8qKlxuICogQ29tcGlsZSBgbm9kZWAuXG4gKi9cblxuQ29tcGlsZXIucHJvdG90eXBlLmNvbXBpbGUgPSBmdW5jdGlvbihub2RlKXtcbiAgcmV0dXJuIHRoaXMuc3R5bGVzaGVldChub2RlKTtcbn07XG5cbi8qKlxuICogVmlzaXQgc3R5bGVzaGVldCBub2RlLlxuICovXG5cbkNvbXBpbGVyLnByb3RvdHlwZS5zdHlsZXNoZWV0ID0gZnVuY3Rpb24obm9kZSl7XG4gIHJldHVybiB0aGlzLm1hcFZpc2l0KG5vZGUuc3R5bGVzaGVldC5ydWxlcywgJ1xcblxcbicpO1xufTtcblxuLyoqXG4gKiBWaXNpdCBjb21tZW50IG5vZGUuXG4gKi9cblxuQ29tcGlsZXIucHJvdG90eXBlLmNvbW1lbnQgPSBmdW5jdGlvbihub2RlKXtcbiAgcmV0dXJuIHRoaXMuZW1pdCh0aGlzLmluZGVudCgpICsgJy8qJyArIG5vZGUuY29tbWVudCArICcqLycsIG5vZGUucG9zaXRpb24pO1xufTtcblxuLyoqXG4gKiBWaXNpdCBpbXBvcnQgbm9kZS5cbiAqL1xuXG5Db21waWxlci5wcm90b3R5cGUuaW1wb3J0ID0gZnVuY3Rpb24obm9kZSl7XG4gIHJldHVybiB0aGlzLmVtaXQoJ0BpbXBvcnQgJyArIG5vZGUuaW1wb3J0ICsgJzsnLCBub2RlLnBvc2l0aW9uKTtcbn07XG5cbi8qKlxuICogVmlzaXQgbWVkaWEgbm9kZS5cbiAqL1xuXG5Db21waWxlci5wcm90b3R5cGUubWVkaWEgPSBmdW5jdGlvbihub2RlKXtcbiAgcmV0dXJuIHRoaXMuZW1pdCgnQG1lZGlhICcgKyBub2RlLm1lZGlhLCBub2RlLnBvc2l0aW9uKVxuICAgICsgdGhpcy5lbWl0KFxuICAgICAgICAnIHtcXG4nXG4gICAgICAgICsgdGhpcy5pbmRlbnQoMSkpXG4gICAgKyB0aGlzLm1hcFZpc2l0KG5vZGUucnVsZXMsICdcXG5cXG4nKVxuICAgICsgdGhpcy5lbWl0KFxuICAgICAgICB0aGlzLmluZGVudCgtMSlcbiAgICAgICAgKyAnXFxufScpO1xufTtcblxuLyoqXG4gKiBWaXNpdCBkb2N1bWVudCBub2RlLlxuICovXG5cbkNvbXBpbGVyLnByb3RvdHlwZS5kb2N1bWVudCA9IGZ1bmN0aW9uKG5vZGUpe1xuICB2YXIgZG9jID0gJ0AnICsgKG5vZGUudmVuZG9yIHx8ICcnKSArICdkb2N1bWVudCAnICsgbm9kZS5kb2N1bWVudDtcblxuICByZXR1cm4gdGhpcy5lbWl0KGRvYywgbm9kZS5wb3NpdGlvbilcbiAgICArIHRoaXMuZW1pdChcbiAgICAgICAgJyAnXG4gICAgICArICcge1xcbidcbiAgICAgICsgdGhpcy5pbmRlbnQoMSkpXG4gICAgKyB0aGlzLm1hcFZpc2l0KG5vZGUucnVsZXMsICdcXG5cXG4nKVxuICAgICsgdGhpcy5lbWl0KFxuICAgICAgICB0aGlzLmluZGVudCgtMSlcbiAgICAgICAgKyAnXFxufScpO1xufTtcblxuLyoqXG4gKiBWaXNpdCBjaGFyc2V0IG5vZGUuXG4gKi9cblxuQ29tcGlsZXIucHJvdG90eXBlLmNoYXJzZXQgPSBmdW5jdGlvbihub2RlKXtcbiAgcmV0dXJuIHRoaXMuZW1pdCgnQGNoYXJzZXQgJyArIG5vZGUuY2hhcnNldCArICc7Jywgbm9kZS5wb3NpdGlvbik7XG59O1xuXG4vKipcbiAqIFZpc2l0IG5hbWVzcGFjZSBub2RlLlxuICovXG5cbkNvbXBpbGVyLnByb3RvdHlwZS5uYW1lc3BhY2UgPSBmdW5jdGlvbihub2RlKXtcbiAgcmV0dXJuIHRoaXMuZW1pdCgnQG5hbWVzcGFjZSAnICsgbm9kZS5uYW1lc3BhY2UgKyAnOycsIG5vZGUucG9zaXRpb24pO1xufTtcblxuLyoqXG4gKiBWaXNpdCBzdXBwb3J0cyBub2RlLlxuICovXG5cbkNvbXBpbGVyLnByb3RvdHlwZS5zdXBwb3J0cyA9IGZ1bmN0aW9uKG5vZGUpe1xuICByZXR1cm4gdGhpcy5lbWl0KCdAc3VwcG9ydHMgJyArIG5vZGUuc3VwcG9ydHMsIG5vZGUucG9zaXRpb24pXG4gICAgKyB0aGlzLmVtaXQoXG4gICAgICAnIHtcXG4nXG4gICAgICArIHRoaXMuaW5kZW50KDEpKVxuICAgICsgdGhpcy5tYXBWaXNpdChub2RlLnJ1bGVzLCAnXFxuXFxuJylcbiAgICArIHRoaXMuZW1pdChcbiAgICAgICAgdGhpcy5pbmRlbnQoLTEpXG4gICAgICAgICsgJ1xcbn0nKTtcbn07XG5cbi8qKlxuICogVmlzaXQga2V5ZnJhbWVzIG5vZGUuXG4gKi9cblxuQ29tcGlsZXIucHJvdG90eXBlLmtleWZyYW1lcyA9IGZ1bmN0aW9uKG5vZGUpe1xuICByZXR1cm4gdGhpcy5lbWl0KCdAJyArIChub2RlLnZlbmRvciB8fCAnJykgKyAna2V5ZnJhbWVzICcgKyBub2RlLm5hbWUsIG5vZGUucG9zaXRpb24pXG4gICAgKyB0aGlzLmVtaXQoXG4gICAgICAnIHtcXG4nXG4gICAgICArIHRoaXMuaW5kZW50KDEpKVxuICAgICsgdGhpcy5tYXBWaXNpdChub2RlLmtleWZyYW1lcywgJ1xcbicpXG4gICAgKyB0aGlzLmVtaXQoXG4gICAgICAgIHRoaXMuaW5kZW50KC0xKVxuICAgICAgICArICd9Jyk7XG59O1xuXG4vKipcbiAqIFZpc2l0IGtleWZyYW1lIG5vZGUuXG4gKi9cblxuQ29tcGlsZXIucHJvdG90eXBlLmtleWZyYW1lID0gZnVuY3Rpb24obm9kZSl7XG4gIHZhciBkZWNscyA9IG5vZGUuZGVjbGFyYXRpb25zO1xuXG4gIHJldHVybiB0aGlzLmVtaXQodGhpcy5pbmRlbnQoKSlcbiAgICArIHRoaXMuZW1pdChub2RlLnZhbHVlcy5qb2luKCcsICcpLCBub2RlLnBvc2l0aW9uKVxuICAgICsgdGhpcy5lbWl0KFxuICAgICAgJyB7XFxuJ1xuICAgICAgKyB0aGlzLmluZGVudCgxKSlcbiAgICArIHRoaXMubWFwVmlzaXQoZGVjbHMsICdcXG4nKVxuICAgICsgdGhpcy5lbWl0KFxuICAgICAgdGhpcy5pbmRlbnQoLTEpXG4gICAgICArICdcXG4nXG4gICAgICArIHRoaXMuaW5kZW50KCkgKyAnfVxcbicpO1xufTtcblxuLyoqXG4gKiBWaXNpdCBwYWdlIG5vZGUuXG4gKi9cblxuQ29tcGlsZXIucHJvdG90eXBlLnBhZ2UgPSBmdW5jdGlvbihub2RlKXtcbiAgdmFyIHNlbCA9IG5vZGUuc2VsZWN0b3JzLmxlbmd0aFxuICAgID8gbm9kZS5zZWxlY3RvcnMuam9pbignLCAnKSArICcgJ1xuICAgIDogJyc7XG5cbiAgcmV0dXJuIHRoaXMuZW1pdCgnQHBhZ2UgJyArIHNlbCwgbm9kZS5wb3NpdGlvbilcbiAgICArIHRoaXMuZW1pdCgne1xcbicpXG4gICAgKyB0aGlzLmVtaXQodGhpcy5pbmRlbnQoMSkpXG4gICAgKyB0aGlzLm1hcFZpc2l0KG5vZGUuZGVjbGFyYXRpb25zLCAnXFxuJylcbiAgICArIHRoaXMuZW1pdCh0aGlzLmluZGVudCgtMSkpXG4gICAgKyB0aGlzLmVtaXQoJ1xcbn0nKTtcbn07XG5cbi8qKlxuICogVmlzaXQgZm9udC1mYWNlIG5vZGUuXG4gKi9cblxuQ29tcGlsZXIucHJvdG90eXBlWydmb250LWZhY2UnXSA9IGZ1bmN0aW9uKG5vZGUpe1xuICByZXR1cm4gdGhpcy5lbWl0KCdAZm9udC1mYWNlICcsIG5vZGUucG9zaXRpb24pXG4gICAgKyB0aGlzLmVtaXQoJ3tcXG4nKVxuICAgICsgdGhpcy5lbWl0KHRoaXMuaW5kZW50KDEpKVxuICAgICsgdGhpcy5tYXBWaXNpdChub2RlLmRlY2xhcmF0aW9ucywgJ1xcbicpXG4gICAgKyB0aGlzLmVtaXQodGhpcy5pbmRlbnQoLTEpKVxuICAgICsgdGhpcy5lbWl0KCdcXG59Jyk7XG59O1xuXG4vKipcbiAqIFZpc2l0IGhvc3Qgbm9kZS5cbiAqL1xuXG5Db21waWxlci5wcm90b3R5cGUuaG9zdCA9IGZ1bmN0aW9uKG5vZGUpe1xuICByZXR1cm4gdGhpcy5lbWl0KCdAaG9zdCcsIG5vZGUucG9zaXRpb24pXG4gICAgKyB0aGlzLmVtaXQoXG4gICAgICAgICcge1xcbidcbiAgICAgICAgKyB0aGlzLmluZGVudCgxKSlcbiAgICArIHRoaXMubWFwVmlzaXQobm9kZS5ydWxlcywgJ1xcblxcbicpXG4gICAgKyB0aGlzLmVtaXQoXG4gICAgICAgIHRoaXMuaW5kZW50KC0xKVxuICAgICAgICArICdcXG59Jyk7XG59O1xuXG4vKipcbiAqIFZpc2l0IGN1c3RvbS1tZWRpYSBub2RlLlxuICovXG5cbkNvbXBpbGVyLnByb3RvdHlwZVsnY3VzdG9tLW1lZGlhJ10gPSBmdW5jdGlvbihub2RlKXtcbiAgcmV0dXJuIHRoaXMuZW1pdCgnQGN1c3RvbS1tZWRpYSAnICsgbm9kZS5uYW1lICsgJyAnICsgbm9kZS5tZWRpYSArICc7Jywgbm9kZS5wb3NpdGlvbik7XG59O1xuXG4vKipcbiAqIFZpc2l0IHJ1bGUgbm9kZS5cbiAqL1xuXG5Db21waWxlci5wcm90b3R5cGUucnVsZSA9IGZ1bmN0aW9uKG5vZGUpe1xuICB2YXIgaW5kZW50ID0gdGhpcy5pbmRlbnQoKTtcbiAgdmFyIGRlY2xzID0gbm9kZS5kZWNsYXJhdGlvbnM7XG4gIGlmICghZGVjbHMubGVuZ3RoKSByZXR1cm4gJyc7XG5cbiAgcmV0dXJuIHRoaXMuZW1pdChub2RlLnNlbGVjdG9ycy5tYXAoZnVuY3Rpb24ocyl7IHJldHVybiBpbmRlbnQgKyBzIH0pLmpvaW4oJyxcXG4nKSwgbm9kZS5wb3NpdGlvbilcbiAgICArIHRoaXMuZW1pdCgnIHtcXG4nKVxuICAgICsgdGhpcy5lbWl0KHRoaXMuaW5kZW50KDEpKVxuICAgICsgdGhpcy5tYXBWaXNpdChkZWNscywgJ1xcbicpXG4gICAgKyB0aGlzLmVtaXQodGhpcy5pbmRlbnQoLTEpKVxuICAgICsgdGhpcy5lbWl0KCdcXG4nICsgdGhpcy5pbmRlbnQoKSArICd9Jyk7XG59O1xuXG4vKipcbiAqIFZpc2l0IGRlY2xhcmF0aW9uIG5vZGUuXG4gKi9cblxuQ29tcGlsZXIucHJvdG90eXBlLmRlY2xhcmF0aW9uID0gZnVuY3Rpb24obm9kZSl7XG4gIHJldHVybiB0aGlzLmVtaXQodGhpcy5pbmRlbnQoKSlcbiAgICArIHRoaXMuZW1pdChub2RlLnByb3BlcnR5ICsgJzogJyArIG5vZGUudmFsdWUsIG5vZGUucG9zaXRpb24pXG4gICAgKyB0aGlzLmVtaXQoJzsnKTtcbn07XG5cbi8qKlxuICogSW5jcmVhc2UsIGRlY3JlYXNlIG9yIHJldHVybiBjdXJyZW50IGluZGVudGF0aW9uLlxuICovXG5cbkNvbXBpbGVyLnByb3RvdHlwZS5pbmRlbnQgPSBmdW5jdGlvbihsZXZlbCkge1xuICB0aGlzLmxldmVsID0gdGhpcy5sZXZlbCB8fCAxO1xuXG4gIGlmIChudWxsICE9IGxldmVsKSB7XG4gICAgdGhpcy5sZXZlbCArPSBsZXZlbDtcbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICByZXR1cm4gQXJyYXkodGhpcy5sZXZlbCkuam9pbih0aGlzLmluZGVudGF0aW9uIHx8ICcgICcpO1xufTtcbiJdfQ==