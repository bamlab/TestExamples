9ff73c6f6cf76d42a35a235d891ee249
var Base = require('./compiler');

var inherits = require('inherits');

module.exports = Compiler;

function Compiler(options) {
  Base.call(this, options);
}

inherits(Compiler, Base);

Compiler.prototype.compile = function (node) {
  return node.stylesheet.rules.map(this.visit, this).join('');
};

Compiler.prototype.comment = function (node) {
  return this.emit('', node.position);
};

Compiler.prototype.import = function (node) {
  return this.emit('@import ' + node.import + ';', node.position);
};

Compiler.prototype.media = function (node) {
  return this.emit('@media ' + node.media, node.position) + this.emit('{') + this.mapVisit(node.rules) + this.emit('}');
};

Compiler.prototype.document = function (node) {
  var doc = '@' + (node.vendor || '') + 'document ' + node.document;
  return this.emit(doc, node.position) + this.emit('{') + this.mapVisit(node.rules) + this.emit('}');
};

Compiler.prototype.charset = function (node) {
  return this.emit('@charset ' + node.charset + ';', node.position);
};

Compiler.prototype.namespace = function (node) {
  return this.emit('@namespace ' + node.namespace + ';', node.position);
};

Compiler.prototype.supports = function (node) {
  return this.emit('@supports ' + node.supports, node.position) + this.emit('{') + this.mapVisit(node.rules) + this.emit('}');
};

Compiler.prototype.keyframes = function (node) {
  return this.emit('@' + (node.vendor || '') + 'keyframes ' + node.name, node.position) + this.emit('{') + this.mapVisit(node.keyframes) + this.emit('}');
};

Compiler.prototype.keyframe = function (node) {
  var decls = node.declarations;
  return this.emit(node.values.join(','), node.position) + this.emit('{') + this.mapVisit(decls) + this.emit('}');
};

Compiler.prototype.page = function (node) {
  var sel = node.selectors.length ? node.selectors.join(', ') : '';
  return this.emit('@page ' + sel, node.position) + this.emit('{') + this.mapVisit(node.declarations) + this.emit('}');
};

Compiler.prototype['font-face'] = function (node) {
  return this.emit('@font-face', node.position) + this.emit('{') + this.mapVisit(node.declarations) + this.emit('}');
};

Compiler.prototype.host = function (node) {
  return this.emit('@host', node.position) + this.emit('{') + this.mapVisit(node.rules) + this.emit('}');
};

Compiler.prototype['custom-media'] = function (node) {
  return this.emit('@custom-media ' + node.name + ' ' + node.media + ';', node.position);
};

Compiler.prototype.rule = function (node) {
  var decls = node.declarations;
  if (!decls.length) return '';
  return this.emit(node.selectors.join(','), node.position) + this.emit('{') + this.mapVisit(decls) + this.emit('}');
};

Compiler.prototype.declaration = function (node) {
  return this.emit(node.property + ':' + node.value, node.position) + this.emit(';');
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXByZXNzLmpzIl0sIm5hbWVzIjpbIkJhc2UiLCJyZXF1aXJlIiwiaW5oZXJpdHMiLCJtb2R1bGUiLCJleHBvcnRzIiwiQ29tcGlsZXIiLCJvcHRpb25zIiwiY2FsbCIsInByb3RvdHlwZSIsImNvbXBpbGUiLCJub2RlIiwic3R5bGVzaGVldCIsInJ1bGVzIiwibWFwIiwidmlzaXQiLCJqb2luIiwiY29tbWVudCIsImVtaXQiLCJwb3NpdGlvbiIsImltcG9ydCIsIm1lZGlhIiwibWFwVmlzaXQiLCJkb2N1bWVudCIsImRvYyIsInZlbmRvciIsImNoYXJzZXQiLCJuYW1lc3BhY2UiLCJzdXBwb3J0cyIsImtleWZyYW1lcyIsIm5hbWUiLCJrZXlmcmFtZSIsImRlY2xzIiwiZGVjbGFyYXRpb25zIiwidmFsdWVzIiwicGFnZSIsInNlbCIsInNlbGVjdG9ycyIsImxlbmd0aCIsImhvc3QiLCJydWxlIiwiZGVjbGFyYXRpb24iLCJwcm9wZXJ0eSIsInZhbHVlIl0sIm1hcHBpbmdzIjoiQUFLQSxJQUFJQSxJQUFJLEdBQUdDLE9BQU8sQ0FBQyxZQUFELENBQWxCOztBQUNBLElBQUlDLFFBQVEsR0FBR0QsT0FBTyxDQUFDLFVBQUQsQ0FBdEI7O0FBTUFFLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQkMsUUFBakI7O0FBTUEsU0FBU0EsUUFBVCxDQUFrQkMsT0FBbEIsRUFBMkI7QUFDekJOLEVBQUFBLElBQUksQ0FBQ08sSUFBTCxDQUFVLElBQVYsRUFBZ0JELE9BQWhCO0FBQ0Q7O0FBTURKLFFBQVEsQ0FBQ0csUUFBRCxFQUFXTCxJQUFYLENBQVI7O0FBTUFLLFFBQVEsQ0FBQ0csU0FBVCxDQUFtQkMsT0FBbkIsR0FBNkIsVUFBU0MsSUFBVCxFQUFjO0FBQ3pDLFNBQU9BLElBQUksQ0FBQ0MsVUFBTCxDQUNKQyxLQURJLENBQ0VDLEdBREYsQ0FDTSxLQUFLQyxLQURYLEVBQ2tCLElBRGxCLEVBRUpDLElBRkksQ0FFQyxFQUZELENBQVA7QUFHRCxDQUpEOztBQVVBVixR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RCIsInNvdXJjZXNDb250ZW50IjpbIlxuLyoqXG4gKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuICovXG5cbnZhciBCYXNlID0gcmVxdWlyZSgnLi9jb21waWxlcicpO1xudmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTtcblxuLyoqXG4gKiBFeHBvc2UgY29tcGlsZXIuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBDb21waWxlcjtcblxuLyoqXG4gKiBJbml0aWFsaXplIGEgbmV3IGBDb21waWxlcmAuXG4gKi9cblxuZnVuY3Rpb24gQ29tcGlsZXIob3B0aW9ucykge1xuICBCYXNlLmNhbGwodGhpcywgb3B0aW9ucyk7XG59XG5cbi8qKlxuICogSW5oZXJpdCBmcm9tIGBCYXNlLnByb3RvdHlwZWAuXG4gKi9cblxuaW5oZXJpdHMoQ29tcGlsZXIsIEJhc2UpO1xuXG4vKipcbiAqIENvbXBpbGUgYG5vZGVgLlxuICovXG5cbkNvbXBpbGVyLnByb3RvdHlwZS5jb21waWxlID0gZnVuY3Rpb24obm9kZSl7XG4gIHJldHVybiBub2RlLnN0eWxlc2hlZXRcbiAgICAucnVsZXMubWFwKHRoaXMudmlzaXQsIHRoaXMpXG4gICAgLmpvaW4oJycpO1xufTtcblxuLyoqXG4gKiBWaXNpdCBjb21tZW50IG5vZGUuXG4gKi9cblxuQ29tcGlsZXIucHJvdG90eXBlLmNvbW1lbnQgPSBmdW5jdGlvbihub2RlKXtcbiAgcmV0dXJuIHRoaXMuZW1pdCgnJywgbm9kZS5wb3NpdGlvbik7XG59O1xuXG4vKipcbiAqIFZpc2l0IGltcG9ydCBub2RlLlxuICovXG5cbkNvbXBpbGVyLnByb3RvdHlwZS5pbXBvcnQgPSBmdW5jdGlvbihub2RlKXtcbiAgcmV0dXJuIHRoaXMuZW1pdCgnQGltcG9ydCAnICsgbm9kZS5pbXBvcnQgKyAnOycsIG5vZGUucG9zaXRpb24pO1xufTtcblxuLyoqXG4gKiBWaXNpdCBtZWRpYSBub2RlLlxuICovXG5cbkNvbXBpbGVyLnByb3RvdHlwZS5tZWRpYSA9IGZ1bmN0aW9uKG5vZGUpe1xuICByZXR1cm4gdGhpcy5lbWl0KCdAbWVkaWEgJyArIG5vZGUubWVkaWEsIG5vZGUucG9zaXRpb24pXG4gICAgKyB0aGlzLmVtaXQoJ3snKVxuICAgICsgdGhpcy5tYXBWaXNpdChub2RlLnJ1bGVzKVxuICAgICsgdGhpcy5lbWl0KCd9Jyk7XG59O1xuXG4vKipcbiAqIFZpc2l0IGRvY3VtZW50IG5vZGUuXG4gKi9cblxuQ29tcGlsZXIucHJvdG90eXBlLmRvY3VtZW50ID0gZnVuY3Rpb24obm9kZSl7XG4gIHZhciBkb2MgPSAnQCcgKyAobm9kZS52ZW5kb3IgfHwgJycpICsgJ2RvY3VtZW50ICcgKyBub2RlLmRvY3VtZW50O1xuXG4gIHJldHVybiB0aGlzLmVtaXQoZG9jLCBub2RlLnBvc2l0aW9uKVxuICAgICsgdGhpcy5lbWl0KCd7JylcbiAgICArIHRoaXMubWFwVmlzaXQobm9kZS5ydWxlcylcbiAgICArIHRoaXMuZW1pdCgnfScpO1xufTtcblxuLyoqXG4gKiBWaXNpdCBjaGFyc2V0IG5vZGUuXG4gKi9cblxuQ29tcGlsZXIucHJvdG90eXBlLmNoYXJzZXQgPSBmdW5jdGlvbihub2RlKXtcbiAgcmV0dXJuIHRoaXMuZW1pdCgnQGNoYXJzZXQgJyArIG5vZGUuY2hhcnNldCArICc7Jywgbm9kZS5wb3NpdGlvbik7XG59O1xuXG4vKipcbiAqIFZpc2l0IG5hbWVzcGFjZSBub2RlLlxuICovXG5cbkNvbXBpbGVyLnByb3RvdHlwZS5uYW1lc3BhY2UgPSBmdW5jdGlvbihub2RlKXtcbiAgcmV0dXJuIHRoaXMuZW1pdCgnQG5hbWVzcGFjZSAnICsgbm9kZS5uYW1lc3BhY2UgKyAnOycsIG5vZGUucG9zaXRpb24pO1xufTtcblxuLyoqXG4gKiBWaXNpdCBzdXBwb3J0cyBub2RlLlxuICovXG5cbkNvbXBpbGVyLnByb3RvdHlwZS5zdXBwb3J0cyA9IGZ1bmN0aW9uKG5vZGUpe1xuICByZXR1cm4gdGhpcy5lbWl0KCdAc3VwcG9ydHMgJyArIG5vZGUuc3VwcG9ydHMsIG5vZGUucG9zaXRpb24pXG4gICAgKyB0aGlzLmVtaXQoJ3snKVxuICAgICsgdGhpcy5tYXBWaXNpdChub2RlLnJ1bGVzKVxuICAgICsgdGhpcy5lbWl0KCd9Jyk7XG59O1xuXG4vKipcbiAqIFZpc2l0IGtleWZyYW1lcyBub2RlLlxuICovXG5cbkNvbXBpbGVyLnByb3RvdHlwZS5rZXlmcmFtZXMgPSBmdW5jdGlvbihub2RlKXtcbiAgcmV0dXJuIHRoaXMuZW1pdCgnQCdcbiAgICArIChub2RlLnZlbmRvciB8fCAnJylcbiAgICArICdrZXlmcmFtZXMgJ1xuICAgICsgbm9kZS5uYW1lLCBub2RlLnBvc2l0aW9uKVxuICAgICsgdGhpcy5lbWl0KCd7JylcbiAgICArIHRoaXMubWFwVmlzaXQobm9kZS5rZXlmcmFtZXMpXG4gICAgKyB0aGlzLmVtaXQoJ30nKTtcbn07XG5cbi8qKlxuICogVmlzaXQga2V5ZnJhbWUgbm9kZS5cbiAqL1xuXG5Db21waWxlci5wcm90b3R5cGUua2V5ZnJhbWUgPSBmdW5jdGlvbihub2RlKXtcbiAgdmFyIGRlY2xzID0gbm9kZS5kZWNsYXJhdGlvbnM7XG5cbiAgcmV0dXJuIHRoaXMuZW1pdChub2RlLnZhbHVlcy5qb2luKCcsJyksIG5vZGUucG9zaXRpb24pXG4gICAgKyB0aGlzLmVtaXQoJ3snKVxuICAgICsgdGhpcy5tYXBWaXNpdChkZWNscylcbiAgICArIHRoaXMuZW1pdCgnfScpO1xufTtcblxuLyoqXG4gKiBWaXNpdCBwYWdlIG5vZGUuXG4gKi9cblxuQ29tcGlsZXIucHJvdG90eXBlLnBhZ2UgPSBmdW5jdGlvbihub2RlKXtcbiAgdmFyIHNlbCA9IG5vZGUuc2VsZWN0b3JzLmxlbmd0aFxuICAgID8gbm9kZS5zZWxlY3RvcnMuam9pbignLCAnKVxuICAgIDogJyc7XG5cbiAgcmV0dXJuIHRoaXMuZW1pdCgnQHBhZ2UgJyArIHNlbCwgbm9kZS5wb3NpdGlvbilcbiAgICArIHRoaXMuZW1pdCgneycpXG4gICAgKyB0aGlzLm1hcFZpc2l0KG5vZGUuZGVjbGFyYXRpb25zKVxuICAgICsgdGhpcy5lbWl0KCd9Jyk7XG59O1xuXG4vKipcbiAqIFZpc2l0IGZvbnQtZmFjZSBub2RlLlxuICovXG5cbkNvbXBpbGVyLnByb3RvdHlwZVsnZm9udC1mYWNlJ10gPSBmdW5jdGlvbihub2RlKXtcbiAgcmV0dXJuIHRoaXMuZW1pdCgnQGZvbnQtZmFjZScsIG5vZGUucG9zaXRpb24pXG4gICAgKyB0aGlzLmVtaXQoJ3snKVxuICAgICsgdGhpcy5tYXBWaXNpdChub2RlLmRlY2xhcmF0aW9ucylcbiAgICArIHRoaXMuZW1pdCgnfScpO1xufTtcblxuLyoqXG4gKiBWaXNpdCBob3N0IG5vZGUuXG4gKi9cblxuQ29tcGlsZXIucHJvdG90eXBlLmhvc3QgPSBmdW5jdGlvbihub2RlKXtcbiAgcmV0dXJuIHRoaXMuZW1pdCgnQGhvc3QnLCBub2RlLnBvc2l0aW9uKVxuICAgICsgdGhpcy5lbWl0KCd7JylcbiAgICArIHRoaXMubWFwVmlzaXQobm9kZS5ydWxlcylcbiAgICArIHRoaXMuZW1pdCgnfScpO1xufTtcblxuLyoqXG4gKiBWaXNpdCBjdXN0b20tbWVkaWEgbm9kZS5cbiAqL1xuXG5Db21waWxlci5wcm90b3R5cGVbJ2N1c3RvbS1tZWRpYSddID0gZnVuY3Rpb24obm9kZSl7XG4gIHJldHVybiB0aGlzLmVtaXQoJ0BjdXN0b20tbWVkaWEgJyArIG5vZGUubmFtZSArICcgJyArIG5vZGUubWVkaWEgKyAnOycsIG5vZGUucG9zaXRpb24pO1xufTtcblxuLyoqXG4gKiBWaXNpdCBydWxlIG5vZGUuXG4gKi9cblxuQ29tcGlsZXIucHJvdG90eXBlLnJ1bGUgPSBmdW5jdGlvbihub2RlKXtcbiAgdmFyIGRlY2xzID0gbm9kZS5kZWNsYXJhdGlvbnM7XG4gIGlmICghZGVjbHMubGVuZ3RoKSByZXR1cm4gJyc7XG5cbiAgcmV0dXJuIHRoaXMuZW1pdChub2RlLnNlbGVjdG9ycy5qb2luKCcsJyksIG5vZGUucG9zaXRpb24pXG4gICAgKyB0aGlzLmVtaXQoJ3snKVxuICAgICsgdGhpcy5tYXBWaXNpdChkZWNscylcbiAgICArIHRoaXMuZW1pdCgnfScpO1xufTtcblxuLyoqXG4gKiBWaXNpdCBkZWNsYXJhdGlvbiBub2RlLlxuICovXG5cbkNvbXBpbGVyLnByb3RvdHlwZS5kZWNsYXJhdGlvbiA9IGZ1bmN0aW9uKG5vZGUpe1xuICByZXR1cm4gdGhpcy5lbWl0KG5vZGUucHJvcGVydHkgKyAnOicgKyBub2RlLnZhbHVlLCBub2RlLnBvc2l0aW9uKSArIHRoaXMuZW1pdCgnOycpO1xufTtcblxuIl19